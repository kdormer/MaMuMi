extends layout

block content
  h1 MaMuMi
  p Here is an example journey! #{hostname}

  #gMap(style="width:100%;height:800px;")

  #testOut

  

  script.
    
    var map, markers, geoJSON;

    async function myMap() {
      var mapProp= {
        center:new google.maps.LatLng(51.508742,-0.120850),
        zoom:5,
      };

      map = new google.maps.Map(document.getElementById("gMap"),mapProp);
    }

    async function updateMap() {

      map.data.forEach(function (feature) {
        map.data.remove(feature);
      })

      
      $.getJSON("#{hostname.toString()}:#{port}/journeys", function(data) {
        geoJSON = data;
        map.data.addGeoJson(data);

      })


      //map.data.loadGeoJson("#{hostname.toString()}:#{port}/journeys");
      
    }

    async function mobileMarker() {
      
    }

    $(document).ready( function () {
      myMap();
      updateMap();
    });

  script(src="https://maps.googleapis.com/maps/api/js")